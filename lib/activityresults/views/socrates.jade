extends ../../../views/minimalLayout

include  ../../../views/formComponents

block title
  = activityResultName

block content
  #detail-overlay(style='z-index: 100; position: fixed; background: #000; height: 100%; width: 100%;')
    p(style='color: #fff; padding: 0.5em 0.5em; text-transform: uppercase; text-align: center;')
      a(href='#')
        | Close
    div
      img(id='image-detail', src='/gallery/9475905d-b979-4296-af47-ac0164788a1a.JPG', style='width: 100%;')
      #prev-img(style='position: absolute; top: 0; height: 100%; width: 40%; background: red; opacity: 0.1;')
      #next-img(style='position: absolute; top: 0; right: 0; height: 100%; width: 40%; background: blue; opacity: 0.1;')

  .row
    .col-md-12
      h2(style='margin-top: 5px;')= activityResultName

  .row.row-without-negative-margin
    .col-xs-3.col-without-padding.noisy_blue
      p(style="text-align: center")= columns[0].columnTitle
      each img in columns[0].images
        a(href=img.uri)
          img(src=img.uri + '?size=thumb', width=100, height=100, style="margin-top: " + img['margin-top']+ ";")

    .col-xs-3.col-without-padding.noisy_green
      p(style="text-align: center")= columns[1].columnTitle
      each img in columns[1].images
        a(href=img.uri)
          img(src=img.uri + '?size=thumb', width=100, height=100, style="margin-top: " + img['margin-top']+ ";")

    .col-xs-3.col-without-padding.noisy_red
      p(style="text-align: center")= columns[2].columnTitle
      each img in columns[2].images
        a(href=img.uri)
          img(src=img.uri + '?size=thumb', width=100, height=100, style="margin-top: " + img['margin-top']+ ";")

    .col-xs-3.col-without-padding.noisy_yellow
      p(style="text-align: center")= columns[3].columnTitle
      each img in columns[3].images
        a(href=img.uri)
          img(src=img.uri + '?size=thumb', width=100, height=100, style="margin-top: " + img['margin-top']+ ";")

  script(type='text/javascript').
    jQuery(function() {

    $('#detail-overlay').find('a').click(function(e) {
      $('#detail-overlay').css('display', 'none');
    })

    // TODO Implement
    function previousImage(currentImage) {
      console.log(currentImage);
      return '/gallery/fdd09e6d-baf1-4c44-a767-a786d22002bd.JPG';
    }

    // TODO Implement
    function nextImage(currentImage) {
      console.log(currentImage);
      return '/gallery/1806f88e-8ed7-4b3e-92bd-3173c9965541.JPG';
    }

    $('#prev-img').click(function(e) {
      var $image = $('#image-detail');
      var currentImage = $image.attr('src');
      $image.attr('src', previousImage(currentImage));
    });
    $('#next-img').click(function(e) {
      var $image = $('#image-detail');
      var currentImage = $image.attr('src');
      $image.attr('src', nextImage(currentImage));
    });

    });

