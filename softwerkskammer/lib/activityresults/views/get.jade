extends ../../../views/layoutOnlyMain

include  ../../../views/formComponents

block title
  | #{activityResult.id()}

block scripts
  script(src='/clientscripts/activityResults.js')

block content
  .visible-print
    h1 #{activityResult.id()} #{''}
      small Session Snap
    h3 Share your session results and see what others did at softwerkskammer.org
    p(style='text-align:center;')
      img(height='300px', src='/qrcode/#{encodeURIComponent("/activityresults/" + activityResult.id())}')
  .hidden-print
    .row
      .col-md-12
        .page-header
          .pull-right
            form(id='recordForm', role='form', method='POST', action='/activityresults/' + encodeURIComponent(activityResult.id()) + '/upload' + '?_csrf=' + encodeURIComponent(csrf_token), enctype='multipart/form-data')
              #selectFile
                span.btn.btn-primary.btn-file(style='width: 100%')
                  i.fa.fa-fw.fa-camera
                  |  #{t('activityresults.record_image')}
                  input#input-file(type='file', accept='image/*', name='image')
              #previewContainer(style='display: none')
                .btn-group.pull-right
                  span#btn-cancel.btn.btn-default #{t('activityresults.cancel')}
                  button.btn.btn-primary(type='submit') #{t('activityresults.submit')}
                img#preview(style='max-width: 100%; padding-top: 15px;')
          h2(style='margin-top: 5px;') #{activityResult.id()}
    each timestamp in dayTimeStamps
      h3(style='margin-top: 5px;') #{timestamp.locale(language).format('dddd, LL')}
      .row
        .col-md-12(style='overflow-x: auto')
          table
            tr.table-row
              each column, columnTitle in days[timestamp.valueOf()]
                th(style='padding-right: 15px;') #{columnTitle}
  
            tr.table-row
              each column in days[timestamp.valueOf()]
                td(style='vertical-align: top;padding-right: 15px;')
                  each photo in column
                    a(href=photo.uri()): img(src=photo.uri() + '?size=thumb', width='100%', alt=photo.title(), title=photo.title())
                    p.small
                      span(style='display:inline-block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 70%;') #{photo.title()}
                      if (accessrights.canEditPhoto(photo))
                        span &nbsp;
                          a.pull-right(href=activityResult.id() + '/photo/' + photo.id() + '/edit', title=t('general.edit')) 
                            i.fa.fa-fw.fa-edit
                      span.pull-right #{photo.time().locale(language).format('LT')}
      hr
