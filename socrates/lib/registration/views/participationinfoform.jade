include  ../../../views/formComponents

mixin participationinfoform(activity, roomOptions, registrationPossible)
  .row
    .col-md-6
      h3 Payment and Invoice
      p.
        You will pay for the hotel and the hotel will issue an invoice on departure. During registratione you can enter 
        a address for the invoice if the address is not your residential address.
      
      h4 Deposit
      p.
        We require you to pay a (non-refundable) deposit of 100 &euro; as soon as you finish your registration. This will
        also state your registration. You will not receive an invoice for the deposit, so you propably will have to pay this 
        from your private money.
      p However, we will return your deposit to you in cash during your arrival at the conference.
      p You have two alternatives to pay the deposit:
      ul
        li Via bank transfer to a German bank account
        li Via credit card (+3,30 &euro; non-refundable fee, no invoice)
      p.
        If you cannot participate in the event, you can provide another participant to substitute you &ndash; your deposit can
        then be counted towards the replacing participant. Please contact us in this case.

    .col-md-6
      h3 Room Options and Pricing
      p.
        We offer three kinds of rooms. Please choose the room you'd like and tell us for how long you will be our guest.
        All stays start on Thursday evening. There will be no exceptions.
      ul
        li Single bed room
        li Double bed room, can only be shared
        li Junior double bed room (one 160cm bed), can be shared or occupied exclusively
      p If you stay at least until Sunday evening, we assume that you want to participate in the Coderetreat or in one of the workshops on Sunday.
      p All prices are per person and include:
      ul
        li participation in the SoCraTes conference (including the Sunday Coderetreat or workshop, if you like)
        li the hotel room
        li meals, snacks and coffee
      p The final prices depend on our sponsors and may be slightly lower than announced here.
  .row
    .col-sm-12
      -var alreadyRegistered = activity.isAlreadyRegistered(accessrights.memberId())
      form#participationinfoform.relaxed(action='/registration/startRegistration', method='post')
        fieldset(disabled=(!registrationPossible || alreadyRegistered))
          .table-responsive
            table.table.table-striped.table-condensed.table-bordered
              thead
                tr
                  th Room until
                  th.text-center Sat evening
                  th.text-center Sun morning
                  th.text-center Sun evening*
                  th.text-center Mon morning*
              tbody
                for option in roomOptions
                  if (option.displayAsBookable)
                    tr
                      th #{option.name}
                      td.text-center
                        .radio-inline
                          label
                            input(type='radio', name='nightsOptions', value=option.id + ',2')
                            | #{option.two}&nbsp;€
                      td.text-center
                        .radio-inline
                          label
                            input(type='radio', name='nightsOptions', value=option.id + ',3')
                            | #{option.three}&nbsp;€
                      td.text-center
                        .radio-inline
                          label
                            input(type='radio', name='nightsOptions', value=option.id + ',4')
                            | #{option.threePlus}&nbsp;€
                      td.text-center
                        .radio-inline
                          label
                            input(type='radio', name='nightsOptions', value=option.id + ',5')
                            | #{option.four}&nbsp;€
                  else
                    tr
                      th.warning #{option.name}
                      td.warning.text-center(colspan='4') Sorry, this option is not available anymore 
        .row(style='margin-top:-15px; margin-bottom:15px')
          .col-xs-12
            small * including participation in Sunday Coderetreat or Workshop

        +csrf
        if alreadyRegistered
          .btn.pull-right.btn.btn-success You are already registered.
        else
          .row.hidden-print(style='margin-bottom: 10px')
            .col-sm-12
              button.pull-right.btn.btn-primary(type='submit', disabled)
                if (registrationPossible)
                  | I really do want to participate!
                else
                  | Registration will open 28 April, 19:00 CEST
        script.
          $(function() {
            var selectedInput = $('input[value="' + '#{activity.selectedOptionFor(accessrights.memberId())}"]')
            selectedInput.attr('checked','checked');
            selectedInput.parent().parent().parent().addClass('bg-success')
            selectedInput.parent().addClass('text-success')
          })
