extends ../../../views/layout
include ../../../../softwerkskammer/lib/members/views/memberlist-mixin
include ../../../../softwerkskammer/views/format-mixin
include ../../../../softwerkskammer/views/formComponents
include ../../../../softwerkskammer/views/dataTables-mixin
include ajax

mixin localdate(momentOrNull)
  | #{momentOrNull ? momentOrNull.locale('de').format('L') : '-'}

block scripts
  +dataTableImport
  +ajaxFunction
  +dataTable('.addontable', '[ 4, "asc" ]', '[{targets: [0,8,9,10], type: "date-eu"}]')
  +dataTable('.membertable', '[ 0, "asc" ]', '[{targets: 0, type: "date-eu"}]')
  +dataTable('.unsortedtable', '[]', '[]')
  +dataTable('.addressestable', '[ 1, "asc" ]', '[]')
block title
  | Hotel-Informationen
block content
  .row
    .col-md-12
      .page-header
        h2 Hotel-Informationen
          a.btn.pull-right.btn-default(href='/registration') ZurÃ¼ck
    ul.nav.nav-tabs
      li.active: a(href='#addresses', data-toggle='tab') Adressen
      li: a(href='#single', data-toggle='tab') Einzelzimmer
      li: a(href='#bed_in_double', data-toggle='tab') Doppelzimmer
      li: a(href='#bed_in_junior', data-toggle='tab') Junior-DZ Doppelbelegung
      li: a(href='#junior', data-toggle='tab') Junior-DZ Einzelbelegung
      li: a(href='#total', data-toggle='tab') Gesamt-Personenzahl
  .row
    .col-md-12
      .tab-content
        .tab-pane#addresses
          .panel
            table.table.table-condensed.table-hover.table-striped.addressestable
              thead
                tr
                  th Vorname
                  th Nachname
                  th Heimatadresse
                  th Rechnungsadresse
              tbody
                for line in addonLines
                  tr
                    td #{line.member.firstname()}
                    td #{line.member.lastname()}
                    td: +formatAsLines(line.addon.homeAddressLines())
                    td: +formatAsLines(line.addon.billingAddressLines())

        .tab-pane#single
          -var resourceName = 'single'
          -var participants = activity.participantsOf(resourceName)
          -var resource = activity.socratesResourceNamed(resourceName)
          .panel
            table.table.table-condensed.table-hover.table-striped.membertable
              thead
                tr
                  th Donnerstag - Samstag
                  th Samstag - Sonntag
                  th Sonntag - Montag
              tbody
                for member in participants
                  -var duration = resource.duration(member.id())
                  -var name = member.displayName()
                  tr
                    td #{name}
                    td #{duration > 2 ? name : ""}
                    td #{duration > 4 ? name : ""}

        .tab-pane#junior
          -var resourceName = 'junior'
          -var participants = activity.participantsOf(resourceName)
          -var resource = activity.socratesResourceNamed(resourceName)
          .panel
            table.table.table-condensed.table-hover.table-striped.membertable
              thead
                tr
                  th Donnerstag - Samstag
                  th Samstag - Sonntag
                  th Sonntag - Montag
              tbody
                for member in participants
                  -var duration = resource.duration(member.id())
                  -var name = member.displayName()
                  tr
                    td #{name}
                    td #{duration > 2 ? name : ""}
                    td #{duration > 4 ? name : ""}
